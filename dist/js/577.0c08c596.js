"use strict";(self["webpackChunkapi_demo_ionic_vue"]=self["webpackChunkapi_demo_ionic_vue"]||[]).push([[577],{5577:function(e,t,s){s.r(t),s.d(t,{HttpWeb:function(){return O}});var o=s(3025);const n=async e=>new Promise(((t,s)=>{const o=new FileReader;o.onload=()=>{const e=o.result,s=e.substr(e.indexOf(",")+1);t(s)},o.onerror=e=>s(e),o.readAsDataURL(e)})),a=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),c=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),r=(e,t,s={})=>{const o=a(e),n=a(t),c=`; expires=${(s.expires||"").replace("expires=","")}`,r=(s.path||"/").replace("path=","");document.cookie=`${o}=${n||""}${c}; path=${r}`},i=()=>{const e=[],t={};if(!document.cookie)return e;const s=document.cookie.split(";")||[];for(const n of s){let[e,s]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");e=c(e).trim(),s=c(s).trim(),t[e]=s}const o=Object.entries(t);for(const[n,a]of o)e.push({key:n,value:a});return e},d=e=>{const t=i();for(const s of t)if(s.key===e)return s;return{key:e,value:""}},l=e=>{document.cookie=`${e}=; Max-Age=0`},p=()=>{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)},u=(e={})=>{const t=Object.keys(e),s=Object.keys(e).map((e=>e.toLocaleLowerCase())),o=s.reduce(((s,o,n)=>(s[o]=e[t[n]],s)),{});return o},h=(e,t=!0)=>{if(!e)return null;const s=Object.entries(e).reduce(((e,s)=>{const[o,n]=s;let a,c;return Array.isArray(n)?(c="",n.forEach((e=>{a=t?encodeURIComponent(e):e,c+=`${o}=${a}&`})),c.slice(0,-1)):(a=t?encodeURIComponent(n):n,c=`${o}=${a}`),`${e}&${c}`}),"");return s.substr(1)},y=(e,t={})=>{const s=Object.assign({method:e.method||"GET",headers:e.headers},t),o=u(e.headers),n=o["content-type"]||"";if("string"===typeof e.data)s.body=e.data;else if(n.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[s,o]of Object.entries(e.data||{}))t.set(s,o);s.body=t.toString()}else if(n.includes("multipart/form-data")){const t=new FormData;if(e.data instanceof FormData)e.data.forEach(((e,s)=>{t.append(s,e)}));else for(let s of Object.keys(e.data))t.append(s,e.data[s]);s.body=t;const o=new Headers(s.headers);o.delete("content-type"),s.headers=o}else(n.includes("application/json")||"object"===typeof e.data)&&(s.body=JSON.stringify(e.data));return s},b=async e=>{const t=y(e,e.webFetchExtra),s=h(e.params,e.shouldEncodeUrlParams),o=s?`${e.url}?${s}`:e.url,a=await fetch(o,t),c=a.headers.get("content-type")||"";let r,{responseType:i="text"}=a.ok?e:{};switch(c.includes("application/json")&&(i="json"),i){case"arraybuffer":case"blob":const e=await a.blob();r=await n(e);break;case"json":r=await a.json();break;case"document":case"text":default:r=await a.text()}const d={};return a.headers.forEach(((e,t)=>{d[t]=e})),{data:r,headers:d,status:a.status,url:a.url}},f=async e=>b(Object.assign(Object.assign({},e),{method:"GET"})),m=async e=>b(Object.assign(Object.assign({},e),{method:"POST"})),g=async e=>b(Object.assign(Object.assign({},e),{method:"PUT"})),k=async e=>b(Object.assign(Object.assign({},e),{method:"PATCH"})),w=async e=>b(Object.assign(Object.assign({},e),{method:"DELETE"}));class O extends o.Uw{constructor(){super(),this.request=async e=>b(e),this.get=async e=>f(e),this.post=async e=>m(e),this.put=async e=>g(e),this.patch=async e=>k(e),this.del=async e=>w(e),this.getCookiesMap=async e=>{const t=i(),s={};for(const o of t)s[o.key]=o.value;return s},this.getCookies=async e=>{const{url:t}=e,s=i();return{cookies:s}},this.setCookie=async e=>{const{key:t,value:s,expires:o="",path:n=""}=e;r(t,s,{expires:o,path:n})},this.getCookie=async e=>d(e.key),this.deleteCookie=async e=>l(e.key),this.clearCookies=async e=>p(),this.clearAllCookies=async()=>p(),this.uploadFile=async e=>{const t=new FormData;t.append(e.name,e.blob||"undefined");const s=Object.assign(Object.assign({},e),{body:t,method:"POST"});return this.post(s)},this.downloadFile=async e=>{const t=y(e,e.webFetchExtra),s=await fetch(e.url,t);let o;if(null===e||void 0===e?void 0:e.progress)if(null===s||void 0===s?void 0:s.body){const t=s.body.getReader();let n=0,a=[];const c=s.headers.get("content-type"),r=parseInt(s.headers.get("content-length")||"0",10);while(1){const{done:s,value:o}=await t.read();if(s)break;a.push(o),n+=(null===o||void 0===o?void 0:o.length)||0;const c={type:"DOWNLOAD",url:e.url,bytes:n,contentLength:r};this.notifyListeners("progress",c)}let i=new Uint8Array(n),d=0;for(const e of a)"undefined"!==typeof e&&(i.set(e,d),d+=e.length);o=new Blob([i.buffer],{type:c||void 0})}else o=new Blob;else o=await s.blob();return{blob:o}}}}}}]);
//# sourceMappingURL=577.0c08c596.js.map