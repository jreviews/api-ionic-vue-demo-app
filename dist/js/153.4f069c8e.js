"use strict";(self["webpackChunkapi_demo_ionic_vue"]=self["webpackChunkapi_demo_ionic_vue"]||[]).push([[153],{279:function(e,l,t){t.r(l),t.d(l,{default:function(){return Q}});var a=t(6252),r=t(2262),s=t(3577),i=t(2201),o=t(7732),n=t(8903),u=t(4155),d=t(9005),c=t(1503),m=t(4728),v=t(7344),g=t(2820);const p={class:"m-4 overflow-hidden rounded-md border border-[color:var(--ion-color-light-shade)] bg-[color:var(--ion-color-light)] dark:border-0 dark:bg-[color:var(--ion-color-light)]"},f=["src"],w={class:"pt-4 pb-2 px-4 flex justify-between items-center"},U={class:"text-base font-medium inline-block truncate text-[color:var(--ion-color-dark-shade)]"},S={class:"pl-3 pt-0.5 pb-1 flex justify-between items-center border-t border-[color:var(--ion-color-light-shade)] dark:border-[color:var(--ion-color-light-tint)]"},_=(0,a._)("span",null,"Read more",-1);var h=(0,a.aZ)({__name:"ListingCardLayout",props:{listing:{type:Object,required:!0}},setup(e){const l=e,t=(0,r.Vh)(l,"listing");return(e,l)=>{const i=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",p,[(0,a.Wm)(i,{to:{name:"listings.show",params:{id:(0,r.SU)(t).id}},class:"relative"},{default:(0,a.w5)((()=>[(0,r.SU)(t).featured?((0,a.wg)(),(0,a.j4)(g.Z,{key:0,class:"top-2 left-2"})):(0,a.kq)("",!0),(0,r.SU)(t)?.photos[0]?.thumbnails?.md?((0,a.wg)(),(0,a.iD)("img",{key:1,src:(0,r.SU)(t).photos[0].thumbnails.md,class:"h-48 w-full object-cover object-center"},null,8,f)):(0,a.kq)("",!0),(0,a._)("div",w,[(0,a._)("p",U,(0,s.zw)((0,r.SU)(t).title),1),(0,a.Wm)(m.Z,{size:"sm",listing:(0,r.SU)(t)},null,8,["listing"])])])),_:1},8,["to"]),(0,a._)("div",S,[(0,a.Wm)(v.Z,{"listing-id":(0,r.SU)(t).id,state:(0,r.SU)(t).favorites.did_favorite??!1},null,8,["listing-id","state"]),(0,a.Wm)((0,r.SU)(o.YG),{"router-link":{name:"listings.show",params:{id:(0,r.SU)(t).id}},size:"small",fill:"clear",expand:"block"},{default:(0,a.w5)((()=>[_])),_:1},8,["router-link"])])])}}});const k=h;var b=k;const y=(0,a.Uk)("Most recent"),W=(0,a.Uk)("Top rated"),j=(0,a.Uk)("Featured"),q=(0,a.Uk)("Alphabetically");var x=(0,a.aZ)({__name:"ListingSort",props:{selected:{type:String,required:!0}},emits:["order-changed"],setup(e,{emit:l}){const t=e,s=(0,r.Vh)(t,"selected"),i=e=>{l("order-changed",e.detail.value)};return(e,l)=>((0,a.wg)(),(0,a.j4)((0,r.SU)(o.q_),{lines:"none",class:"py-3"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(o.se),{value:(0,r.SU)(s),onIonChange:l[0]||(l[0]=e=>i(e))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(o.Ie),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(o.Q$),null,{default:(0,a.w5)((()=>[y])),_:1}),(0,a.Wm)((0,r.SU)(o.B7),{value:"created"})])),_:1}),(0,a.Wm)((0,r.SU)(o.Ie),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(o.Q$),null,{default:(0,a.w5)((()=>[W])),_:1}),(0,a.Wm)((0,r.SU)(o.B7),{value:"rating"})])),_:1}),(0,a.Wm)((0,r.SU)(o.Ie),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(o.Q$),null,{default:(0,a.w5)((()=>[j])),_:1}),(0,a.Wm)((0,r.SU)(o.B7),{value:"featured"})])),_:1}),(0,a.Wm)((0,r.SU)(o.Ie),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(o.Q$),null,{default:(0,a.w5)((()=>[q])),_:1}),(0,a.Wm)((0,r.SU)(o.B7),{value:"title"})])),_:1})])),_:1},8,["value"])])),_:1}))}});const I=x;var B=I;const C={class:"m-4 overflow-hidden rounded-md border border-[color:var(--ion-color-light-shade)] bg-[color:var(--ion-color-light)] dark:border-0 dark:bg-[color:var(--ion-color-light)]"},L={class:"relative"},Z={class:"py-2 px-4"};var H=(0,a.aZ)({__name:"ListingCardSkeleton",setup(e){return(e,l)=>((0,a.wg)(),(0,a.iD)("div",C,[(0,a._)("div",L,[(0,a.Wm)((0,r.SU)(o.Bs),{class:"h-48 w-full object-cover object-center"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(o.CK),{animated:""})])),_:1}),(0,a._)("div",Z,[(0,a.Wm)((0,r.SU)(o.CK),{animated:"",class:"h-4"})])])]))}});const z=H;var D=z;const F=(0,a.Uk)("My Favorites"),M=(0,a.Uk)("My Listings");var Y=(0,a.aZ)({__name:"ListingsPage",props:{query:{type:Object,default:()=>({})},me:{type:String,default:""}},setup(e){const l=e,t=(0,u.A)(),m=(0,i.yj)(),v=(0,o.cj)(),g=(0,r.iH)(!1),p=(0,r.iH)(!1),f=(0,r.iH)([]),w=(0,r.iH)({pg:1,sort:"created"});let U={...l.query,...m.query,pg:1};delete U["heading"];const S=(0,a.Fl)((()=>t.getUpdatedListings(f.value))),_=(0,a.Fl)((()=>m.query.heading??l.query.heading??"Listings")),h=e=>{f.value=[],w.value={...w.value,pg:1,q:e}},k=async e=>{const l=await o.oq.create({component:B,event:e,componentProps:{selected:w.value.sort}});await l.present(),l.el.querySelector("ion-radio-group").addEventListener("click",(e=>{y(e.target.value),l.dismiss()}))},y=e=>{f.value=[],w.value={...w.value,pg:1,sort:e}},W=async()=>{let e,t;p.value=!0,"favorites"==l.me?({results:e,meta:t}=await(0,d.Uc)({params:{...w.value,exclude:"fields"}})):"listings"==l.me?({results:e,meta:t}=await(0,d.Bz)({params:{...w.value,exclude:"fields"}})):({results:e,meta:t}=await(0,d.pF)({params:{...w.value,exclude:"fields"}})),p.value=!1,t.current_page==t.last_page&&(g.value=!0),f.value=[...f.value,...e]},j=async e=>{g.value||(w.value.pg++,e.target.complete())};return(0,a.YP)((()=>w),(()=>W()),{deep:!0}),w.value={...U,pg:1},(e,t)=>((0,a.wg)(),(0,a.j4)((0,r.SU)(o._i),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(o.Gu),{translucent:!0},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,r.SU)(o.sr),{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(o.Sm),{slot:"start"},{default:(0,a.w5)((()=>[(0,r.SU)(v).canGoBack()?((0,a.wg)(),(0,a.j4)((0,r.SU)(o.oU),{key:0,ref:"backButton","default-href":"/"},null,512)):(0,a.kq)("",!0)])),_:1}),"favorites"==l.me?((0,a.wg)(),(0,a.j4)((0,r.SU)(o.wd),{key:0},{default:(0,a.w5)((()=>[F])),_:1})):(0,a.kq)("",!0),"listings"==l.me?((0,a.wg)(),(0,a.j4)((0,r.SU)(o.wd),{key:1},{default:(0,a.w5)((()=>[M])),_:1})):(0,a.kq)("",!0),l.me?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)((0,r.SU)(o.wd),{key:2},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)((0,r.SU)(_)),1)])),_:1})),(0,a.Wm)((0,r.SU)(o.Sm),{slot:"end",class:"mt-1"},{default:(0,a.w5)((()=>[(0,a.Wm)(c.Z)])),_:1})])),_:1})),(0,a.Wm)((0,r.SU)(o.sr),{class:"relative flex"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(o.VI),{placeholder:`Search ${(0,r.SU)(_)}`,inputmode:"text",debounce:500,onIonChange:t[0]||(t[0]=e=>h(e.detail.value))},null,8,["placeholder"]),(0,a._)("button",{onClick:t[1]||(t[1]=e=>k(e)),slot:"end",class:"h-full flex items-center pb-4 pr-2"},[(0,a.Wm)((0,r.SU)(o.gu),{class:"w-6 h-6",color:"medium",icon:(0,r.SU)(n.YMi)},null,8,["icon"])])])),_:1})])),_:1}),(0,a.Wm)((0,r.SU)(o.W2),{fullscreen:!0},{default:(0,a.w5)((()=>[p.value?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(5,(e=>(0,a.Wm)(D,{key:e}))),64)):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,r.SU)(S),(e=>((0,a.wg)(),(0,a.j4)(b,{key:e.id,listing:e},null,8,["listing"])))),128)),(0,a.Wm)((0,r.SU)(o.ju),{onIonInfinite:t[2]||(t[2]=e=>j(e)),disabled:g.value,threshold:"350px"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,r.SU)(o.MB))])),_:1},8,["disabled"])])),_:1})])),_:1}))}}),$=t(3744);const K=(0,$.Z)(Y,[["__scopeId","data-v-1b08c646"]]);var Q=K}}]);
//# sourceMappingURL=153.4f069c8e.js.map